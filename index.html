
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°°í„°ë¦¬ ì „ê·¹ ë¬¼ì„± ê³„ì‚°ê¸°</title>
    
    <!-- PWA ì„¤ì • -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ì „ê·¹ ê³„ì‚°ê¸°">
    <meta name="theme-color" content="#2563eb">
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuuwsO2EsOumrCDsoITqt7Ag66y87ISxIOqzoOyCsOq4sCIsCiAgInNob3J0X25hbWUiOiAi7KCE6re5IOqzoOyCsOq4sCIsCiAgInN0YXJ0X3VybCI6ICIuIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjZjlmYWZiIiwKICAidGhlbWVfY29sb3IiOiAiIzI1NjNlYiIsCiAgImljb25zIjogWwogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmclMjB4bWxucyUzRCdodHRwJTNBJTJGJTJGd3d3LnczLm9yZyUyRjIwMDAlMkZzdmcnJTIwdmlld0JveCUzRCcwJTIwMCUyMDEwMCUyMDEwMCclM0UlM0NyZWN0JTIwd2lkdGglM0QnMTAwJyUyMGhlaWdodCUzRCcxMDAnJTIwZmlsbCUzRCclMjMyNTYzZWInJTJGJTNFJTNDdGV4dCUyMHglM0QnNTAlMjUyNSclMjB5JTNEJzUwJTI1MjUnJTIwZm9udC1zaXplJTNEJzYwJyUyMHRleHQtYW5jaG9yJTNEJ21pZGRsZSclMjBkb21pbmFudC1iYXNlbGluZSUzRCdtaWRkbGUnJTIwZmlsbCUzRCd3aGl0ZSclM0UlRjAlOUYlOTQlOEIlM0MlMkZ0ZXh0JTNFJTNDJTJGc3ZnJTNFIiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnJTIweG1sbnMlM0QnaHR0cCUzQSUyRiUyRnd3dy53My5vcmclMkYyMDAwJTJGc3ZnJyUyMHZpZXdCb3glM0QnMCUyMDAlMjAxMDAlMjAxMDAnJTNFJTNDcmVjdCUyMHdpZHRoJTNEJzEwMCclMjBoZWlnaHQlM0QnMTAwJyUyMGZpbGwlM0QnJTIzMjU2M2ViJyUyRiUzRSUzQ3RleHQlMjB4JTNEJzUwJTI1MjUnMjB5JTNEJzUwJTI1MjUnMjBmb250LXNpemUlM0QnNjAnMjB0ZXh0LWFuY2hvciUzRCdtaWRkbGUnMjBkb21pbmFudC1iYXNlbGluZSUzRCdtaWRkbGUnMjBmaWxsJTNEJ3doaXRlJyUzRSVGMCU5RiU5NCU4QiUzQyUyRnRleHQlM0UlM0MlMkZzdmclM0UiLAogICAgICAic2l6ZXMiOiAiNTEyeDUxMiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9CiAgXQp9">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f9fafb;
            padding: 1.5rem;
            line-height: 1.5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .header h1 {
            font-size: 2rem;
            color: #111827;
            margin-bottom: 0.5rem;
        }
        .header p {
            color: #6b7280;
        }
        .mode-badge {
            margin-top: 1rem;
            padding: 0.75rem 1.5rem;
            background: #dbeafe;
            border-radius: 0.5rem;
            display: inline-block;
            color: #1e40af;
            font-weight: 600;
        }
        .card {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .card-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #111827;
            margin-bottom: 1.5rem;
        }
        .section-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.75rem;
        }
        .button-group {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        .btn {
            flex: 1;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-primary {
            background: #2563eb;
            color: white;
        }
        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
        }
        .btn-success {
            background: #16a34a;
            color: white;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .input-group {
            background: #f9fafb;
            padding: 1.25rem;
            border-radius: 0.75rem;
            border: 1px solid #e5e7eb;
        }
        .input-group label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.75rem;
        }
        .input-group select,
        .input-group input {
            width: 100%;
            padding: 0.625rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }
        .input-group input[type="number"] {
            font-weight: bold;
        }
        .input-with-unit {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .input-with-unit input {
            flex: 1;
            margin-bottom: 0;
        }
        .input-with-unit span {
            font-weight: 600;
            color: #4b5563;
            white-space: nowrap;
        }
        .info-text {
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }
        .result-card {
            padding: 1.25rem;
            border-radius: 0.75rem;
            border: 1px solid;
        }
        .result-card.blue { background: #eff6ff; border-color: #bfdbfe; }
        .result-card.green { background: #f0fdf4; border-color: #bbf7d0; }
        .result-card.purple { background: #faf5ff; border-color: #e9d5ff; }
        .result-card.orange { background: #fff7ed; border-color: #fed7aa; }
        .result-card.yellow { background: #fefce8; border-color: #fde68a; }
        .result-card.pink { background: #fdf2f8; border-color: #fbcfe8; }
        .result-card.cyan { background: #ecfeff; border-color: #a5f3fc; }
        .result-card.indigo { background: #eef2ff; border-color: #c7d2fe; }
        .result-card.violet { background: #f5f3ff; border-color: #ddd6fe; }
        .result-card.amber { background: #fffbeb; border-color: #fde68a; }
        .result-label {
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        .result-card.blue .result-label { color: #1e40af; }
        .result-card.green .result-label { color: #15803d; }
        .result-card.purple .result-label { color: #6b21a8; }
        .result-card.orange .result-label { color: #c2410c; }
        .result-card.yellow .result-label { color: #a16207; }
        .result-card.pink .result-label { color: #be185d; }
        .result-card.cyan .result-label { color: #0e7490; }
        .result-card.indigo .result-label { color: #3730a3; }
        .result-card.violet .result-label { color: #5b21b6; }
        .result-card.amber .result-label { color: #b45309; }
        .result-value {
            font-size: 1.875rem;
            font-weight: bold;
            margin-bottom: 0.25rem;
        }
        .result-card.blue .result-value { color: #1d4ed8; }
        .result-card.green .result-value { color: #16a34a; }
        .result-card.purple .result-value { color: #7c3aed; }
        .result-card.orange .result-value { color: #ea580c; }
        .result-card.yellow .result-value { color: #ca8a04; }
        .result-card.pink .result-value { color: #db2777; }
        .result-card.cyan .result-value { color: #0891b2; }
        .result-card.indigo .result-value { color: #4f46e5; }
        .result-card.violet .result-value { color: #7c3aed; }
        .result-card.amber .result-value { color: #d97706; }
        .result-unit {
            font-size: 0.75rem;
            color: #4b5563;
        }
        .info-box {
            background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
            border: 1px solid #93c5fd;
            border-radius: 1rem;
            padding: 2rem;
        }
        .info-box h3 {
            font-size: 1.25rem;
            font-weight: bold;
            color: #111827;
            margin-bottom: 1rem;
        }
        .info-box p {
            color: #374151;
            font-size: 0.875rem;
            margin-bottom: 0.625rem;
            line-height: 1.6;
        }
        .info-box strong {
            color: #1e40af;
        }
        .custom-inputs {
            display: none;
            margin-top: 0.75rem;
        }
        .custom-inputs.active {
            display: block;
        }
        .custom-input-item {
            margin-bottom: 0.75rem;
        }
        .custom-input-item label {
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            color: #4b5563;
            margin-bottom: 0.25rem;
        }
        .custom-input-item input {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-weight: bold;
        }
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            .header h1 {
                font-size: 1.5rem;
            }
            .card {
                padding: 1.25rem;
            }
            .result-value {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ë°°í„°ë¦¬ ì „ê·¹ ë¬¼ì„± ê³„ì‚°ê¸°</h1>
            <p>ì‹¤ì œ ë°°í„°ë¦¬ ì œì¡° ì¡°ê±´ ê¸°ë°˜ ì „ê·¹ ë°€ë„ ë° ê³µê·¹ë¥  ê³„ì‚°</p>
            <div class="mode-badge">ğŸ“ ì„¤ê³„ ëª¨ë“œ</div>
        </div>

        <div class="card">
            <h2 class="card-title">ì „ê·¹ êµ¬ì„± ì…ë ¥</h2>
            <div class="info-text" style="margin-bottom: 1rem; padding: 0.75rem; background: #eff6ff; border-radius: 0.5rem; border: 1px solid #bfdbfe;">
                â„¹ï¸ ëª¨ë“  ë¹„ìœ¨ì€ <strong>ë¬´ê²Œ ê¸°ì¤€(wt%)</strong>ì…ë‹ˆë‹¤
            </div>
            
            <div class="section-title">ì „ê·¹ íƒ€ì…</div>
            <div class="button-group">
                <button class="btn btn-primary" id="cathodeBtn">ì–‘ê·¹ (Cathode)</button>
                <button class="btn btn-secondary" id="anodeBtn">ìŒê·¹ (Anode)</button>
            </div>

            <div class="grid">
                <div class="input-group">
                    <label>í™œë¬¼ì§ˆ (ë¬´ê²Œë¹„)</label>
                    <select id="activeMaterial">
                        <option value="NCM811">NCM811</option>
                        <option value="NCM622">NCM622</option>
                        <option value="LFP">LFP</option>
                        <option value="LCO">LCO</option>
                        <option value="Custom">ì»¤ìŠ¤í…€ í™œë¬¼ì§ˆ</option>
                    </select>
                    <div class="custom-inputs" id="customMaterialInputs">
                        <div class="custom-input-item">
                            <label>ë¬¼ì§ˆëª… (ì„ íƒ)</label>
                            <input type="text" id="customName" placeholder="ì˜ˆ: NMC532, LNMO">
                        </div>
                        <div class="custom-input-item">
                            <label>ë°€ë„ (g/cmÂ³)</label>
                            <input type="number" id="customDensity" inputmode="decimal" value="4.00" step="0.01" min="1" max="10">
                        </div>
                        <div class="custom-input-item">
                            <label>ê°€ìš©ë¹„ìš©ëŸ‰ (mAh/g)</label>
                            <input type="number" id="customCapacity" inputmode="decimal" value="180" step="1" min="50" max="1000">
                        </div>
                        <div class="custom-input-item">
                            <label>ê³µì¹­ ì „ì•• (V)</label>
                            <input type="number" id="customVoltage" inputmode="decimal" value="3.7" step="0.1" min="0.1" max="5.0">
                        </div>
                    </div>
                    <div class="info-text" id="activeMaterialInfo">ë°€ë„: 4.70 g/cmÂ³<br>ê°€ìš©ë¹„ìš©ëŸ‰: 200 mAh/g<br>ê³µì¹­ì „ì••: 3.7 V<br>ê¶Œì¥ ì „ì••ë²”ìœ„: 3.0-4.2 V</div>
                    <div class="input-with-unit" style="margin-top: 0.5rem;">
                        <input type="number" id="activeMaterialRatio" inputmode="decimal" value="94" step="0.1" min="80" max="98">
                        <span>%</span>
                    </div>
                </div>

                <div class="input-group">
                    <label>ë°”ì¸ë” (ë¬´ê²Œë¹„)</label>
                    <select id="binder">
                        <option value="PVDF">PVDF</option>
                        <option value="SBR">SBR</option>
                        <option value="CMC">CMC</option>
                        <option value="PAA">PAA</option>
                        <option value="Custom">ì»¤ìŠ¤í…€ ë°”ì¸ë”</option>
                    </select>
                    <div class="custom-inputs" id="customBinderInputs">
                        <div class="custom-input-item">
                            <label>ë°”ì¸ë”ëª… (ì„ íƒ)</label>
                            <input type="text" id="customBinderName" placeholder="ì˜ˆ: PVA, PTFE">
                        </div>
                        <div class="custom-input-item">
                            <label>ë°€ë„ (g/cmÂ³)</label>
                            <input type="number" id="customBinderDensity" inputmode="decimal" value="1.50" step="0.01" min="0.5" max="3">
                        </div>
                    </div>
                    <div class="input-with-unit">
                        <input type="number" id="binderRatio" inputmode="decimal" value="3" step="0.1" min="1" max="10">
                        <span>%</span>
                    </div>
                    <div class="info-text" id="binderInfo">ë°€ë„: 1.78 g/cmÂ³</div>
                </div>

                <div class="input-group">
                    <label>ë„ì „ì¬ (ë¬´ê²Œë¹„)</label>
                    <select id="conductor">
                        <option value="Carbon Black">Carbon Black</option>
                        <option value="Super-P">Super-P</option>
                        <option value="CNT">CNT</option>
                        <option value="Graphene">Graphene</option>
                        <option value="Custom">ì»¤ìŠ¤í…€ ë„ì „ì¬</option>
                    </select>
                    <div class="custom-inputs" id="customConductorInputs">
                        <div class="custom-input-item">
                            <label>ë„ì „ì¬ëª… (ì„ íƒ)</label>
                            <input type="text" id="customConductorName" placeholder="ì˜ˆ: VGCF, KB">
                        </div>
                        <div class="custom-input-item">
                            <label>ë°€ë„ (g/cmÂ³)</label>
                            <input type="number" id="customConductorDensity" inputmode="decimal" value="2.00" step="0.01" min="0.5" max="3">
                        </div>
                    </div>
                    <div class="input-with-unit">
                        <input type="number" id="conductorRatio" inputmode="decimal" value="3" step="0.1" min="1" max="10">
                        <span>%</span>
                    </div>
                    <div class="info-text" id="conductorInfo">ë°€ë„: 1.95 g/cmÂ³</div>
                </div>
            </div>

            <div class="grid">
                <div class="input-group">
                    <label>ì½”íŒ… ì¤‘ëŸ‰</label>
                    <div class="input-with-unit">
                        <input type="number" id="coatingWeight" inputmode="decimal" value="" step="0.1" min="5" max="30" placeholder="ì˜ˆ: 15.0">
                        <span>mg/cmÂ²</span>
                    </div>
                </div>

                <div class="input-group">
                    <label>ì½”íŒ… ë‘ê»˜ (ì••ì¶• í›„)</label>
                    <div class="input-with-unit">
                        <input type="number" id="coatingThickness" inputmode="decimal" value="" step="1" min="40" max="150" placeholder="ì˜ˆ: 80">
                        <span>Î¼m</span>
                    </div>
                    <div class="info-text">ìº˜ë¦°ë”ë§ í›„ ë‘ê»˜ ì…ë ¥<br>ê³µê·¹ë¥  30-40% ëª©í‘œ</div>
                </div>

                <div class="input-group">
                    <label>ì½”íŒ… ë©´ì </label>
                    <div class="input-with-unit">
                        <input type="number" id="coatingArea" inputmode="decimal" value="" step="10" min="50" max="500" placeholder="ì˜ˆ: 100">
                        <span>cmÂ²</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card" id="resultsCard">
            <h2 class="card-title">ê³„ì‚° ê²°ê³¼ (ì„¤ê³„ìš©)</h2>
            <div class="result-grid" id="resultsGrid"></div>
        </div>

        <div class="card" id="npRatioCard">
            <h2 class="card-title">N/P Ratio ê³„ì‚°</h2>
            <div class="info-text" style="margin-bottom: 1rem; padding: 0.75rem; background: #fef3c7; border-radius: 0.5rem; border: 1px solid #fde68a;">
                â„¹ï¸ N/P Ratio = ìŒê·¹ ìš©ëŸ‰ / ì–‘ê·¹ ìš©ëŸ‰ (ê¶Œì¥: 1.0~1.2)
            </div>
            <div class="input-group" style="max-width: 300px; margin-bottom: 1.5rem;">
                <label>ëª©í‘œ N/P Ratio</label>
                <div class="input-with-unit">
                    <input type="number" id="targetNPRatio" inputmode="decimal" value="1.1" step="0.05" min="0.8" max="1.5">
                    <span>-</span>
                </div>
                <div class="info-text">ì „ê·¹ ì„¤ê³„ ëª©í‘œ N/P ratio</div>
            </div>
            <div class="result-grid" id="npRatioGrid"></div>
        </div>

        <div class="card" id="experimentalCard">
            <h2 class="card-title">ğŸ”¬ ì‹¤í—˜ ë°ì´í„° ë¹„êµ</h2>
            <div class="info-text" style="margin-bottom: 1.5rem; padding: 0.75rem; background: #f0fdf4; border-radius: 0.5rem; border: 1px solid #bbf7d0;">
                â„¹ï¸ ì‹¤ì œ ì¸¡ì •ëœ ë°©ì „ìš©ëŸ‰ì„ mAh/cmÂ² ë˜ëŠ” mAh/g ë‹¨ìœ„ë¡œ ì…ë ¥í•˜ì„¸ìš” (ìë™ ë³€í™˜ë©ë‹ˆë‹¤)
            </div>
            <div class="grid">
                <div class="input-group">
                    <label>ì‹¤ì œ ì¸¡ì • ë°©ì „ìš©ëŸ‰ (ë©´ì  ê¸°ì¤€)</label>
                    <div class="input-with-unit">
                        <input type="number" id="measuredCapacity" inputmode="decimal" value="" step="0.01" min="0" placeholder="ì˜ˆ: 2.5">
                        <span>mAh/cmÂ²</span>
                    </div>
                    <div class="info-text">ì‹¤í—˜ì—ì„œ ì¸¡ì •ëœ ë©´ì  ë°©ì „ìš©ëŸ‰</div>
                </div>
                <div class="input-group">
                    <label>ì‹¤ì œ ì¸¡ì • ë°©ì „ìš©ëŸ‰ (ì¤‘ëŸ‰ ê¸°ì¤€)</label>
                    <div class="input-with-unit">
                        <input type="number" id="measuredCapacityGravimetric" inputmode="decimal" value="" step="0.1" min="0" placeholder="ì˜ˆ: 140">
                        <span>mAh/g</span>
                    </div>
                    <div class="info-text">ì‹¤í—˜ì—ì„œ ì¸¡ì •ëœ ì¤‘ëŸ‰ ë°©ì „ìš©ëŸ‰</div>
                </div>
                <div class="input-group">
                    <label>ì¸¡ì • C-rate</label>
                    <div class="input-with-unit">
                        <input type="number" id="measuredCrate" inputmode="decimal" value="0.1" step="0.1" min="0.05" max="5">
                        <span>C</span>
                    </div>
                    <div class="info-text">ìš©ëŸ‰ ì¸¡ì • ì‹œ ì‚¬ìš©í•œ C-rate</div>
                </div>
            </div>
            <div class="result-grid" id="experimentalGrid"></div>
        </div>

        <div class="info-box">
            <h3>ê³„ì‚° ì›ë¦¬</h3>
            <p><strong>ì´ë¡  ë°€ë„:</strong> Ï_ì´ë¡  = 1 / Î£(w_i / Ï_i), Rule of Mixtures ë°©ì‹</p>
            <p><strong>ì‹¤ì œ ë°€ë„:</strong> Ï_ì‹¤ì œ = ì½”íŒ… ì¤‘ëŸ‰ / ì½”íŒ… ë¶€í”¼, ì••ì¶• í›„ ì‹¤ì œ ë°€ë„</p>
            <p><strong>ê³µê·¹ë¥ :</strong> Îµ = 1 - (Ï_ì‹¤ì œ / Ï_ì´ë¡ ), ì „í•´ì§ˆ ê³µê°„ ë¹„ìœ¨</p>
            <p><strong>âš ï¸ ì••ì¶• ê°€ì´ë“œ:</strong> ì½”íŒ… ë‘ê»˜ëŠ” ìº˜ë¦°ë”ë§ í›„ ë‘ê»˜ ì…ë ¥. ê³µê·¹ë¥  30-40% ëª©í‘œ ì‹œ, ì´ˆê¸° ë‘ê»˜ ëŒ€ë¹„ ì•½ 40-50% ì••ì¶• í•„ìš”</p>
            <p><strong>ë©´ì  ìš©ëŸ‰:</strong> C_ë©´ì  = ë¡œë”© Ã— í™œë¬¼ì§ˆë¹„ Ã— ê°€ìš©ë¹„ìš©ëŸ‰</p>
            <p><strong>ğŸ’¡ ê°€ìš©ë¹„ìš©ëŸ‰:</strong> ì…ë ¥ëœ ìš©ëŸ‰ì€ ë¬¸í—Œì—ì„œ í†µìƒì ìœ¼ë¡œ ë³´ê³ ë˜ëŠ” ê°€ìš© ë¹„ìš©ëŸ‰ê°’ (íŠ¹ì • ì „ì••ë²”ìœ„ ê¸°ì¤€)</p>
            <p><strong>ì²´ì  ì—ë„ˆì§€ë°€ë„:</strong> E_ì²´ì  = (C_ë©´ì  Ã— ê³µì¹­ì „ì••) / ë‘ê»˜, (mAh/cmÂ² Ã— V) / cm = Wh/L</p>
            <p><strong>ì¤‘ëŸ‰ ìš©ëŸ‰:</strong> C_ì¤‘ëŸ‰ = ì´ ìš©ëŸ‰ / ì½”íŒ…ì¸µ ë¬´ê²Œ (ì§‘ì „ì²´ ì œì™¸, ë…¼ë¬¸ ë¹„êµìš©)</p>
            <p><strong>N/P Ratio:</strong> ëª©í‘œ N/P ratio ì…ë ¥ ì‹œ í•„ìš”í•œ ìƒëŒ€ ì „ê·¹ ìš©ëŸ‰ ìë™ ê³„ì‚°, 1.0~1.2ê°€ ì ì • (1.0 ë¯¸ë§Œ: ë¦¬íŠ¬ ì„ì¶œ ìœ„í—˜, 1.2 ì´ˆê³¼: ìš©ëŸ‰ ë‚­ë¹„)</p>
            <p><strong>ğŸ”¬ ì‹¤í—˜ ë¹„êµ:</strong> ì‹¤ì¸¡ ìš©ëŸ‰ì€ mAh/cmÂ² ë˜ëŠ” mAh/g ë‹¨ìœ„ë¡œ ì…ë ¥ ê°€ëŠ¥ (ìë™ ë³€í™˜). ì„¤ê³„ê°’ ëŒ€ë¹„ ìš©ëŸ‰ ìœ ì§€ìœ¨ê³¼ ì°¨ì´ë¥¼ ê³„ì‚° (85% ì´ìƒ: ì–‘í˜¸)</p>
            <p><strong>ìµœì  ì¡°ê±´:</strong> ê³µê·¹ë¥  30-40%, ë¡œë”© 10-20 mg/cmÂ², ë°€ë„ 2.5-3.5 g/cmÂ³</p>
        </div>
    </div>

    <script>
        const materials = {
            cathode: {
                'NCM811': { density: 4.70, capacity: 200, nominalVoltage: 3.7, lowerCutoff: 3.0, upperCutoff: 4.2 },
                'NCM622': { density: 4.65, capacity: 180, nominalVoltage: 3.7, lowerCutoff: 3.0, upperCutoff: 4.2 },
                'LFP': { density: 3.60, capacity: 160, nominalVoltage: 3.2, lowerCutoff: 2.5, upperCutoff: 3.65 },
                'LCO': { density: 5.05, capacity: 145, nominalVoltage: 3.9, lowerCutoff: 3.0, upperCutoff: 4.2 }
            },
            anode: {
                'Graphite': { density: 2.26, capacity: 360, nominalVoltage: 0.1, lowerCutoff: 0.01, upperCutoff: 1.5 },
                'Si-Graphite': { density: 2.10, capacity: 450, nominalVoltage: 0.2, lowerCutoff: 0.01, upperCutoff: 1.5 },
                'SiOx': { density: 2.30, capacity: 500, nominalVoltage: 0.2, lowerCutoff: 0.01, upperCutoff: 1.5 },
                'LTO': { density: 3.50, capacity: 175, nominalVoltage: 1.5, lowerCutoff: 1.0, upperCutoff: 2.5 }
            },
            binder: {
                'PVDF': { density: 1.78 },
                'SBR': { density: 1.00 },
                'CMC': { density: 1.60 },
                'PAA': { density: 1.20 }
            },
            conductor: {
                'Carbon Black': { density: 1.95 },
                'Super-P': { density: 2.00 },
                'CNT': { density: 1.35 },
                'Graphene': { density: 2.20 }
            },
            currentCollector: {
                'Al (Cathode)': { density: 2.70, thickness: 15 },
                'Cu (Anode)': { density: 8.96, thickness: 10 }
            }
        };

        let electrodeType = 'cathode';

        const cathodeBtn = document.getElementById('cathodeBtn');
        const anodeBtn = document.getElementById('anodeBtn');
        const activeMaterialSelect = document.getElementById('activeMaterial');
        const customMaterialInputs = document.getElementById('customMaterialInputs');
        const activeMaterialInfo = document.getElementById('activeMaterialInfo');

        cathodeBtn.addEventListener('click', () => {
            electrodeType = 'cathode';
            cathodeBtn.className = 'btn btn-primary';
            anodeBtn.className = 'btn btn-secondary';
            updateActiveMaterialOptions();
            calculate();
        });

        anodeBtn.addEventListener('click', () => {
            electrodeType = 'anode';
            anodeBtn.className = 'btn btn-secondary';
            cathodeBtn.className = 'btn btn-secondary';
            anodeBtn.className = 'btn btn-success';
            updateActiveMaterialOptions();
            calculate();
        });

        function updateActiveMaterialOptions() {
            const materialDB = materials[electrodeType];
            activeMaterialSelect.innerHTML = '';
            Object.keys(materialDB).forEach(mat => {
                const option = document.createElement('option');
                option.value = mat;
                option.textContent = mat;
                activeMaterialSelect.appendChild(option);
            });
            const customOption = document.createElement('option');
            customOption.value = 'Custom';
            customOption.textContent = 'ì»¤ìŠ¤í…€ í™œë¬¼ì§ˆ';
            activeMaterialSelect.appendChild(customOption);
            updateMaterialInfo();
        }

        function updateMaterialInfo() {
            const material = activeMaterialSelect.value;
            if (material === 'Custom') {
                customMaterialInputs.classList.add('active');
                activeMaterialInfo.style.display = 'none';
            } else {
                customMaterialInputs.classList.remove('active');
                activeMaterialInfo.style.display = 'block';
                const mat = materials[electrodeType][material];
                activeMaterialInfo.innerHTML = `ë°€ë„: ${mat.density} g/cmÂ³<br>ê°€ìš©ë¹„ìš©ëŸ‰: ${mat.capacity} mAh/g<br>ê³µì¹­ì „ì••: ${mat.nominalVoltage} V<br>ê¶Œì¥ ì „ì••ë²”ìœ„: ${mat.lowerCutoff}-${mat.upperCutoff} V`;
            }
        }

        activeMaterialSelect.addEventListener('change', () => {
            updateMaterialInfo();
            calculate();
        });

        document.getElementById('binder').addEventListener('change', (e) => {
            const binderType = e.target.value;
            const customBinderInputs = document.getElementById('customBinderInputs');
            const binderInfo = document.getElementById('binderInfo');
            
            if (binderType === 'Custom') {
                customBinderInputs.classList.add('active');
                binderInfo.style.display = 'none';
            } else {
                customBinderInputs.classList.remove('active');
                binderInfo.style.display = 'block';
                const density = materials.binder[binderType].density;
                binderInfo.textContent = `ë°€ë„: ${density} g/cmÂ³`;
            }
            calculate();
        });

        document.getElementById('conductor').addEventListener('change', (e) => {
            const conductorType = e.target.value;
            const customConductorInputs = document.getElementById('customConductorInputs');
            const conductorInfo = document.getElementById('conductorInfo');
            
            if (conductorType === 'Custom') {
                customConductorInputs.classList.add('active');
                conductorInfo.style.display = 'none';
            } else {
                customConductorInputs.classList.remove('active');
                conductorInfo.style.display = 'block';
                const density = materials.conductor[conductorType].density;
                conductorInfo.textContent = `ë°€ë„: ${density} g/cmÂ³`;
            }
            calculate();
        });

        const inputIds = ['activeMaterialRatio', 'binderRatio', 'conductorRatio', 'coatingWeight', 'coatingThickness', 'coatingArea', 'customDensity', 'customCapacity', 'customVoltage', 'customBinderDensity', 'customConductorDensity', 'targetNPRatio', 'measuredCapacity', 'measuredCapacityGravimetric', 'measuredCrate'];
        
        inputIds.forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.addEventListener('input', calculate);
            }
        });

        // ë©´ì  ìš©ëŸ‰ê³¼ ì¤‘ëŸ‰ ìš©ëŸ‰ ê°„ ìë™ ë³€í™˜ (ì…ë ¥ ì™„ë£Œ í›„)
        document.getElementById('measuredCapacity').addEventListener('blur', (e) => {
            const arealCap = parseFloat(e.target.value);
            const coatingWeight = parseFloat(document.getElementById('coatingWeight').value);
            if (arealCap && arealCap > 0 && coatingWeight && coatingWeight > 0) {
                const gravCap = (arealCap * 1000) / coatingWeight;
                document.getElementById('measuredCapacityGravimetric').value = gravCap.toFixed(1);
            }
            calculate(); // ë³€í™˜ í›„ ì¦‰ì‹œ ê³„ì‚°
        });

        document.getElementById('measuredCapacityGravimetric').addEventListener('blur', (e) => {
            const gravCap = parseFloat(e.target.value);
            const coatingWeight = parseFloat(document.getElementById('coatingWeight').value);
            if (gravCap && gravCap > 0 && coatingWeight && coatingWeight > 0) {
                const arealCap = (gravCap * coatingWeight) / 1000;
                document.getElementById('measuredCapacity').value = arealCap.toFixed(2);
            }
            calculate(); // ë³€í™˜ í›„ ì¦‰ì‹œ ê³„ì‚°
        });

        // ì½”íŒ… ì¤‘ëŸ‰ ë³€ê²½ ì‹œ ì´ë¯¸ ì…ë ¥ëœ ê°’ì´ ìˆìœ¼ë©´ ìë™ ì¬ê³„ì‚° (ì…ë ¥ ì™„ë£Œ í›„)
        document.getElementById('coatingWeight').addEventListener('blur', () => {
            const arealCap = parseFloat(document.getElementById('measuredCapacity').value);
            const coatingWeight = parseFloat(document.getElementById('coatingWeight').value);
            if (arealCap && arealCap > 0 && coatingWeight && coatingWeight > 0) {
                const gravCap = (arealCap * 1000) / coatingWeight;
                document.getElementById('measuredCapacityGravimetric').value = gravCap.toFixed(1);
            }
            calculate(); // ë³€í™˜ í›„ ì¦‰ì‹œ ê³„ì‚°
        });

        function calculate() {
            const activeMaterial = activeMaterialSelect.value;
            let rho_active, capacity, nominalVoltage;
            
            if (activeMaterial === 'Custom') {
                rho_active = parseFloat(document.getElementById('customDensity').value) || 4.0;
                capacity = parseFloat(document.getElementById('customCapacity').value) || 180;
                nominalVoltage = parseFloat(document.getElementById('customVoltage').value) || 3.7;
            } else {
                const mat = materials[electrodeType][activeMaterial];
                rho_active = mat.density;
                capacity = mat.capacity;
                nominalVoltage = mat.nominalVoltage;
            }

            const activeMaterialRatio = parseFloat(document.getElementById('activeMaterialRatio').value) || 94;
            const binderRatio = parseFloat(document.getElementById('binderRatio').value) || 3;
            const conductorRatio = parseFloat(document.getElementById('conductorRatio').value) || 3;
            
            const binder = document.getElementById('binder').value;
            const conductor = document.getElementById('conductor').value;
            
            let rho_binder, rho_conductor;
            
            if (binder === 'Custom') {
                rho_binder = parseFloat(document.getElementById('customBinderDensity').value) || 1.5;
            } else {
                rho_binder = materials.binder[binder].density;
            }
            
            if (conductor === 'Custom') {
                rho_conductor = parseFloat(document.getElementById('customConductorDensity').value) || 2.0;
            } else {
                rho_conductor = materials.conductor[conductor].density;
            }

            const currentCollector = electrodeType === 'cathode' ? 'Al (Cathode)' : 'Cu (Anode)';
            const rho_cc = materials.currentCollector[currentCollector].density;
            const cc_thickness = materials.currentCollector[currentCollector].thickness;

            const coatingWeight = parseFloat(document.getElementById('coatingWeight').value) || 15;
            const coatingThickness = parseFloat(document.getElementById('coatingThickness').value) || 80;
            const coatingArea = parseFloat(document.getElementById('coatingArea').value) || 100;

            const w_active = activeMaterialRatio / 100;
            const w_binder = binderRatio / 100;
            const w_conductor = conductorRatio / 100;

            const rho_theoretical = 1 / ((w_active / rho_active) + (w_binder / rho_binder) + (w_conductor / rho_conductor));

            const totalMass = coatingWeight * coatingArea;
            const coatingVolume = coatingThickness * 1e-4 * coatingArea;
            const rho_actual = totalMass / 1000 / coatingVolume;

            const porosity = 1 - (rho_actual / rho_theoretical);
            const porosityPercent = porosity * 100;

            const areal_capacity = coatingWeight * w_active * capacity / 1000;
            
            const coatingThickness_cm = coatingThickness * 1e-4;
            const energy_density_volumetric = (areal_capacity * nominalVoltage) / coatingThickness_cm;

            const coating_weight_g = totalMass / 1000;
            const total_capacity = areal_capacity * coatingArea;
            const gravimetric_capacity = total_capacity / coating_weight_g;

            const cc_weight = rho_cc * cc_thickness * 1e-4 * coatingArea;
            const total_weight = cc_weight + coating_weight_g;

            // N/P Ratio ê³„ì‚° (ëª©í‘œ N/P ratio ê¸°ë°˜)
            const targetNPRatio = parseFloat(document.getElementById('targetNPRatio').value) || 1.1;
            let requiredCounterCapacity, npRatioStatus;
            
            if (electrodeType === 'cathode') {
                // ì–‘ê·¹ ì„¤ê³„ ì¤‘: í•„ìš”í•œ ìŒê·¹ ìš©ëŸ‰ = ì–‘ê·¹ ìš©ëŸ‰ Ã— N/P ratio
                requiredCounterCapacity = areal_capacity * targetNPRatio;
                npRatioStatus = targetNPRatio >= 1.0 && targetNPRatio <= 1.2 ? 'ì ì •' : targetNPRatio < 1.0 ? 'âš ï¸ ë¦¬íŠ¬ ì„ì¶œ ìœ„í—˜' : 'âš ï¸ ìš©ëŸ‰ ë‚­ë¹„';
            } else {
                // ìŒê·¹ ì„¤ê³„ ì¤‘: í•„ìš”í•œ ì–‘ê·¹ ìš©ëŸ‰ = ìŒê·¹ ìš©ëŸ‰ / N/P ratio
                requiredCounterCapacity = areal_capacity / targetNPRatio;
                npRatioStatus = targetNPRatio >= 1.0 && targetNPRatio <= 1.2 ? 'ì ì •' : targetNPRatio < 1.0 ? 'âš ï¸ ë¦¬íŠ¬ ì„ì¶œ ìœ„í—˜' : 'âš ï¸ ìš©ëŸ‰ ë‚­ë¹„';
            }

            const results = [
                { label: 'ì´ë¡  ë°€ë„', value: rho_theoretical.toFixed(3), unit: 'g/cmÂ³', color: 'blue' },
                { label: 'ì‹¤ì œ ë°€ë„', value: rho_actual.toFixed(3), unit: 'g/cmÂ³', color: 'green' },
                { label: 'ê³µê·¹ë¥ ', value: porosityPercent.toFixed(2), unit: '%', color: 'purple' },
                { label: 'ë¡œë”©', value: coatingWeight.toFixed(2), unit: 'mg/cmÂ²', color: 'orange' },
                { label: 'ë©´ì  ìš©ëŸ‰', value: areal_capacity.toFixed(2), unit: 'mAh/cmÂ²', color: 'yellow' },
                { label: 'ì²´ì  ì—ë„ˆì§€ë°€ë„', value: energy_density_volumetric.toFixed(1), unit: 'Wh/L', color: 'pink' },
                { label: 'ì²´ì  ìš©ëŸ‰', value: (areal_capacity / coatingThickness_cm).toFixed(1), unit: 'mAh/cmÂ³', color: 'cyan' },
                { label: 'ì¤‘ëŸ‰ ìš©ëŸ‰', value: gravimetric_capacity.toFixed(1), unit: 'mAh/g', color: 'indigo' },
                { label: 'í™œë¬¼ì§ˆ ì²´ì ë¶„ìœ¨', value: ((1 - porosity) * w_active).toFixed(3), unit: '-', color: 'violet' },
                { label: 'ê³µì¹­ ì „ì••', value: nominalVoltage.toFixed(2), unit: 'V', color: 'amber' }
            ];

            const npRatioResults = [
                { label: electrodeType === 'cathode' ? 'ì–‘ê·¹ ìš©ëŸ‰ (ì„¤ê³„)' : 'ìŒê·¹ ìš©ëŸ‰ (ì„¤ê³„)', value: areal_capacity.toFixed(2), unit: 'mAh/cmÂ²', color: 'blue' },
                { label: electrodeType === 'cathode' ? 'í•„ìš”í•œ ìŒê·¹ ìš©ëŸ‰' : 'í•„ìš”í•œ ì–‘ê·¹ ìš©ëŸ‰', value: requiredCounterCapacity.toFixed(2), unit: 'mAh/cmÂ²', color: 'green' },
                { label: 'ëª©í‘œ N/P Ratio', value: targetNPRatio.toFixed(2), unit: '-', color: 'amber' },
                { label: 'ìƒíƒœ', value: npRatioStatus, unit: '', color: targetNPRatio >= 1.0 && targetNPRatio <= 1.2 ? 'green' : 'orange' }
            ];

            displayResults(results, 'resultsGrid');
            displayResults(npRatioResults, 'npRatioGrid');

            // ì‹¤í—˜ ë°ì´í„° ë¹„êµ
            const measuredCapacity = parseFloat(document.getElementById('measuredCapacity').value);
            if (measuredCapacity && measuredCapacity > 0) {
                const capacityRetention = (measuredCapacity / areal_capacity) * 100;
                const capacityDifference = measuredCapacity - areal_capacity;
                const measuredGravimetricCapacity = (measuredCapacity * coatingArea) / coating_weight_g;
                const measuredVolumetricEnergy = (measuredCapacity * nominalVoltage) / coatingThickness_cm;
                const energyRetention = (measuredVolumetricEnergy / energy_density_volumetric) * 100;
                
                let retentionStatus;
                if (capacityRetention >= 95) {
                    retentionStatus = 'âœ… ìš°ìˆ˜';
                } else if (capacityRetention >= 85) {
                    retentionStatus = 'âœ“ ì–‘í˜¸';
                } else if (capacityRetention >= 70) {
                    retentionStatus = 'âš ï¸ ë³´í†µ';
                } else {
                    retentionStatus = 'âš ï¸ ë¶ˆëŸ‰';
                }

                const experimentalResults = [
                    { label: 'ì„¤ê³„ ìš©ëŸ‰', value: areal_capacity.toFixed(2), unit: 'mAh/cmÂ²', color: 'blue' },
                    { label: 'ì‹¤ì¸¡ ìš©ëŸ‰', value: measuredCapacity.toFixed(2), unit: 'mAh/cmÂ²', color: 'green' },
                    { label: 'ìš©ëŸ‰ ìœ ì§€ìœ¨', value: capacityRetention.toFixed(1), unit: '%', color: capacityRetention >= 85 ? 'green' : 'orange' },
                    { label: 'ìš©ëŸ‰ ì°¨ì´', value: capacityDifference.toFixed(2), unit: 'mAh/cmÂ²', color: capacityDifference >= 0 ? 'cyan' : 'pink' },
                    { label: 'ì‹¤ì¸¡ ì¤‘ëŸ‰ìš©ëŸ‰', value: measuredGravimetricCapacity.toFixed(1), unit: 'mAh/g', color: 'indigo' },
                    { label: 'ì„¤ê³„ ì—ë„ˆì§€ë°€ë„', value: energy_density_volumetric.toFixed(1), unit: 'Wh/L', color: 'violet' },
                    { label: 'ì‹¤ì¸¡ ì—ë„ˆì§€ë°€ë„', value: measuredVolumetricEnergy.toFixed(1), unit: 'Wh/L', color: 'purple' },
                    { label: 'ì—ë„ˆì§€ë°€ë„ ìœ ì§€ìœ¨', value: energyRetention.toFixed(1), unit: '%', color: energyRetention >= 85 ? 'green' : 'orange' },
                    { label: 'ìƒíƒœ', value: retentionStatus, unit: '', color: capacityRetention >= 85 ? 'green' : 'orange' }
                ];
                
                displayResults(experimentalResults, 'experimentalGrid');
            } else {
                document.getElementById('experimentalGrid').innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: #6b7280; padding: 2rem;">ì‹¤ì œ ì¸¡ì • ë°©ì „ìš©ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”</div>';
            }
        }

        function displayResults(results, gridId) {
            const grid = document.getElementById(gridId);
            grid.innerHTML = results.map(r => `
                <div class="result-card ${r.color}">
                    <div class="result-label">${r.label}</div>
                    <div class="result-value">${r.value}</div>
                    <div class="result-unit">${r.unit}</div>
                </div>
            `).join('');
        }

        window.addEventListener('DOMContentLoaded', function() {
            calculate();
        });
    </script>
</body>
</html>